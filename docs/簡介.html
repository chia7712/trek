<html>
<head>
  <title>簡介</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303244 (zh-TW, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="688"/>
<h1>簡介</h1>

<div>
<span><div>Data Trek（簡稱DT）以restful APIs為介面，讓使用者操作不同檔案協定的資料。目前支援的操作如下：</div><div><ol><li>ACCESS （資料複製或搬移）</li><li>LIST（資料搜尋）</li><li>DELETE（資料刪除）</li></ol><div><br/></div><div>除此之外，DT也內建多項服務，如下：</div><ol><li><b>HBase Data Storage</b>，該儲存系統會將小檔存於hbase table，大檔存於hdfs，並建立索引表格以供資料查找。</li><li><b>Mapping Table</b>，使用者可寄存alias，並使用於restful APIs</li><li><b>Task Log</b>，涉及大量資料存取之操作（例如資料複製或搬移）都會記錄起來，使用者可透過restful APIs查找歷史或正在執行的任務</li></ol><div><br/></div><div><span style="font-size: 19px;"><b>Restful APIs使用</b><b>流程：</b></span></div><div><br/></div><div>1) 接受命令</div><div>                           restful api</div><div>http客戶端 &lt;- - - - - - - - - - - - -&gt; data service</div><div><br/></div><div>2) 將資料從（from） 複製到（to）</div><div>                           （<span style="color: rgb(255, 0, 0);"><b>from</b></span>）input stream                                          （ <span style="color: rgb(255, 0, 0);"><b>to</b></span>）output stream</div><div>data source &lt;- - - - - - - - - - - - - - - - - - - - &gt; data service &lt;- - - - - - - - - - - - - - - - - - - &gt; data destination</div><div>                                                                          </div></div><div><span style="color: rgb(255, 0, 0);">ps. http客戶端代表發起restful api的節點</span></div><div><hr/></div><div><span style="font-size: 19px;"><b>API Reference</b></span></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><b>Mapping</b></span></div><table style="-evernote-table:true;border-collapse:collapse;table-layout:fixed;margin-left:0px;width:100%;"><tbody><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33333333333333%;"><div style="text-align: center"><b>Method</b></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33333333333333%;"><div style="text-align: center"><b>Http Request</b></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.26086956521739%;"><div style="text-align: center"><b>Description</b></div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">update</div><div style="text-align: center"><a href="Update Mapping API.html" style="color:#69aa35">Update Mapping API</a></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">GET /mapping/update?{update}</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">Updates add or delete an mapping</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">list</div><div style="text-align: center"><a href="List Mapping API.html" style="color:#69aa35">List Mapping API</a></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">GET /mapping/list?{query}</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">Retrieves the list of mapping</div></td></tr></tbody></table><div><br/></div><div><span style="font-size: 16px;"><b>Data</b></span></div><table style="-evernote-table:true;border-collapse:collapse;table-layout:fixed;margin-left:0px;width:100%;"><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33333333333333%;"><div style="text-align: center"><b>Method</b></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33333333333333%;"><div style="text-align: center"><b>Http Request</b></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.22222222222222%;"><div style="text-align: center"><b>Description</b></div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">access</div><div style="text-align: center"><a href="Access Data API.html" style="color:#69aa35">Access Data API</a></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">GET,POST /data/access?{from}&amp;{to}</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">Copy the data from a storage to another storage</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">list</div><div style="text-align: center"><a href="List Data API.html" style="color:#69aa35">List Data API</a></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">GET /data/list?{query}</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">Retrieves the list of data</div></td></tr></table><div><br/></div><div><span style="font-size: 16px;"><b>Task</b></span></div><table style="-evernote-table:true;border-collapse:collapse;table-layout:fixed;margin-left:0px;width:100%;"><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33333333333333%;"><div style="text-align: center"><b>Method</b></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33333333333333%;"><div style="text-align: center"><b>Http Request</b></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.22222222222222%;"><div style="text-align: center"><b>Description</b></div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">list</div><div style="text-align: center"><a href="List Task API.html" style="color:#69aa35">List Task API</a></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">GET /task/list?{query}</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:33.33%;"><div style="text-align: center">Retrieves the loading list of task</div></td></tr></table><div><b><span style="font-size: 19px;"><br/></span></b></div><div><b><span style="font-size: 19px;"><br/></span></b></div><div><hr/></div><div><span style="font-size: 19px;"><b>Restful APIs說明：</b></span></div><div><b><br/></b></div><div><b>通則：</b></div><ol><li>query中為字串的都支援wildcard * 和 ?</li><li>query中為時間的格式都為YYYY-MM-DD'T'HH:MI:SS.SSS </li><li>query必須經過utf-8編碼</li><li>任何可帶有任意字元的參數(ex. password)都需要二次utf-8編碼</li><li>所有list相關的APIs（list, watch, listmapping）都支援offset （預設0）、limt（預設100，指定&lt;0代表沒限制）、filter 、asc和orderby</li><li>所有list相關的APIs所回傳的資料都是符合所有條件（沒填值代表不用該條件去過濾資料）</li><li>所有list相關的APIs的搜尋流程：
<ol><li>filter</li><li>order by</li><li>offset</li><li>limit</li></ol></li><li>比例相關的值範圍(0.0f ~ 1.0f)</li><li>資料夾的檔案大小都定為0</li><li>除了單一來源且該來源支援使用者指定之排序方式（例如mapping的排序預設為id），否則排序的實作方式為in-memory merge sort，亦即list後的資料量太大時可能會導致操作失敗</li><li>大小範圍的設定都可用(min, max)，min &lt;= v &lt; max</li><li>url的query忽略大小寫，亦即from、From和FROM在ACCESS中都是代表來源資料</li></ol></span>
</div></body></html> 